import L from "leaflet";

// SVG icons untuk setiap kategori
const categoryIcons: Record<string, string> = {
  Makanan: `<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 26 26" fill="none">
    <path d="M25 11H1C0.734784 11 0.48043 11.1054 0.292893 11.2929C0.105357 11.4804 0 11.7348 0 12C0.00439376 14.3782 0.658866 16.7099 1.89264 18.7429C3.12641 20.776 4.89253 22.4331 7 23.535V24C7 24.5304 7.21071 25.0392 7.58579 25.4142C7.96086 25.7893 8.46957 26 9 26H17C17.5304 26 18.0391 25.7893 18.4142 25.4142C18.7893 25.0392 19 24.5304 19 24V23.535C21.1075 22.4331 22.8736 20.776 24.1074 18.7429C25.3411 16.7099 25.9956 14.3782 26 12C26 11.7348 25.8946 11.4804 25.7071 11.2929C25.5196 11.1054 25.2652 11 25 11ZM17.5825 22C17.4086 22.0799 17.2614 22.208 17.1581 22.369C17.0549 22.5301 17 22.7174 17 22.9088V24H9V22.9113C9.00049 22.7195 8.94585 22.5317 8.84257 22.3701C8.73929 22.2085 8.59174 22.0801 8.4175 22C6.6589 21.1908 5.1441 19.9332 4.02513 18.3535C2.90617 16.7737 2.22242 14.9275 2.0425 13H23.9538C23.7742 14.9271 23.091 16.7731 21.9727 18.3528C20.8544 19.9324 19.3404 21.1903 17.5825 22ZM7.22125 3.87501C7.89 3.04251 8.055 2.48001 7.98625 2.23251C7.93375 2.04626 7.685 1.95001 7.6825 1.95001C7.45614 1.87562 7.26378 1.72286 7.14007 1.51922C7.01635 1.31559 6.96941 1.07447 7.0077 0.839296C7.046 0.604123 7.167 0.390351 7.34892 0.23648C7.53085 0.0826092 7.76173 -0.00124707 8 1.40194e-05C8.10085 0.000132095 8.20112 0.0152992 8.2975 0.0450141C8.4225 0.0837641 9.53625 0.461264 9.89625 1.64001C10.2037 2.64876 9.8275 3.82126 8.77875 5.12626C8.11 5.95876 7.945 6.52126 8.01375 6.76876C8.06625 6.95501 8.31 7.04876 8.3125 7.05001C8.53844 7.12428 8.73052 7.27664 8.85425 7.47975C8.97799 7.68285 9.02528 7.92342 8.98765 8.15825C8.95002 8.39309 8.82992 8.60682 8.64891 8.76109C8.4679 8.91537 8.23783 9.00007 8 9.00001C7.89915 8.9999 7.79888 8.98473 7.7025 8.95501C7.5775 8.91626 6.46375 8.53876 6.10375 7.36001C5.79625 6.35126 6.1725 5.17876 7.22125 3.87501ZM12.2212 3.87501C12.89 3.04251 13.055 2.48001 12.9862 2.23251C12.9337 2.04626 12.685 1.95001 12.6825 1.95001C12.4561 1.87562 12.2638 1.72286 12.1401 1.51922C12.0164 1.31559 11.9694 1.07447 12.0077 0.839296C12.046 0.604123 12.167 0.390351 12.3489 0.23648C12.5308 0.0826092 12.7617 -0.00124707 13 1.40194e-05C13.1009 0.000132095 13.2011 0.0152992 13.2975 0.0450141C13.4225 0.0837641 14.5362 0.461264 14.8962 1.64001C15.2037 2.64876 14.8275 3.82126 13.7787 5.12626C13.11 5.95876 12.945 6.52126 13.0138 6.76876C13.0663 6.95501 13.31 7.04876 13.3125 7.05001C13.5384 7.12428 13.7305 7.27664 13.8543 7.47975C13.978 7.68285 14.0253 7.92342 13.9877 8.15825C13.95 8.39309 13.8299 8.60682 13.6489 8.76109C13.4679 8.91537 13.2378 9.00007 13 9.00001C12.8991 8.9999 12.7989 8.98473 12.7025 8.95501C12.5775 8.91626 11.4638 8.53876 11.1038 7.36001C10.7963 6.35126 11.1725 5.17876 12.2212 3.87501ZM17.2213 3.87501C17.89 3.04251 18.055 2.48001 17.9862 2.23251C17.9337 2.04626 17.685 1.95001 17.6825 1.95001C17.4561 1.87562 17.2638 1.72286 17.1401 1.51922C17.0164 1.31559 16.9694 1.07447 17.0077 0.839296C17.046 0.604123 17.167 0.390351 17.3489 0.23648C17.5308 0.0826092 17.7617 -0.00124707 18 1.40194e-05C18.1009 0.000132095 18.2011 0.0152992 18.2975 0.0450141C18.4225 0.0837641 19.5362 0.461264 19.8962 1.64001C20.2037 2.64876 19.8275 3.82126 18.7787 5.12626C18.11 5.95876 17.945 6.52126 18.0138 6.76876C18.0663 6.95501 18.31 7.04876 18.3125 7.05001C18.5384 7.12428 18.7305 7.27664 18.8543 7.47975C18.978 7.68285 19.0253 7.92342 18.9877 8.15825C18.95 8.39309 18.8299 8.60682 18.6489 8.76109C18.4679 8.91537 18.2378 9.00007 18 9.00001C17.8991 8.9999 17.7989 8.98473 17.7025 8.95501C17.5775 8.91626 16.4638 8.53876 16.1038 7.36001C15.7963 6.35126 16.1725 5.17876 17.2213 3.87501Z" fill="#13569C"/>
  </svg>`,

  Minuman: `<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 26 26" fill="none">
    <path d="M12 2H14V0H12V2ZM13 5C12.7348 5 12.4804 5.10536 12.2929 5.29289C12.1054 5.48043 12 5.73478 12 6H14C14 5.73478 13.8946 5.48043 13.7071 5.29289C13.5196 5.10536 13.2652 5 13 5ZM2 11H24C24 14.3782 23.3411 16.7099 22.1074 18.7429C20.8736 20.776 19.1075 22.4331 17 23.535V24C17 24.5304 16.7893 25.0391 16.4142 25.4142C16.0391 25.7893 15.5304 26 15 26H11C10.4696 26 9.96086 25.7893 9.58579 25.4142C9.21071 25.0391 9 24.5304 9 24V23.535C6.89253 22.4331 5.12641 20.776 3.89264 18.7429C2.65887 16.7099 2.00439 14.3782 2 11ZM11 13H15V14C15.0002 15.628 15.0503 16.2549 15.15 16.875C14.5295 16.6917 13.985 16.3127 13.5975 15.7946C13.21 15.2765 13.0004 14.647 13 14V13Z" fill="#13569C"/>
  </svg>`,

  Jasa: `<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 26 25" fill="none">
  <path d="M24 6H19C19 4.4087 18.3679 2.88258 17.2426 1.75736C16.1174 0.632141 14.5913 0 13 0C11.4087 0 9.88258 0.632141 8.75736 1.75736C7.63214 2.88258 7 4.4087 7 6H2C1.46957 6 0.960859 6.21071 0.585786 6.58579C0.210714 6.96086 0 7.46957 0 8V23C0 23.5304 0.210714 24.0391 0.585786 24.4142C0.960859 24.7893 1.46957 25 2 25H24C24.5304 25 25.0391 24.7893 25.4142 24.4142C25.7893 24.0391 26 23.5304 26 23V8C26 7.46957 25.7893 6.96086 25.4142 6.58579C25.0391 6.21071 24.5304 6 24 6ZM13 2C14.0609 2 15.0783 2.42143 15.8284 3.17157C16.5786 3.92172 17 4.93913 17 6H9C9 4.93913 9.42143 3.92172 10.1716 3.17157C10.9217 2.42143 11.9391 2 13 2ZM24 23H2V8H7V10C7 10.2652 7.10536 10.5196 7.29289 10.7071C7.48043 10.8946 7.73478 11 8 11C8.26522 11 8.51957 10.8946 8.70711 10.7071C8.89464 10.5196 9 10.2652 9 10V8H17V10C17 10.2652 17.1054 10.5196 17.2929 10.7071C17.4804 10.8946 17.7348 11 18 11C18.2652 11 18.5196 10.8946 18.7071 10.7071C18.8946 10.5196 19 10.2652 19 10V8H24V23Z" fill="#13569C"/>
</svg>`,

  Kosmetik: `<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none">
    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" fill="#13569C"/>
  </svg>`,
  "Oleh-oleh": `<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 26 24" fill="none">
  <path d="M26 8C26.0005 7.90702 25.9879 7.81444 25.9625 7.725L24.1688 1.45C24.0482 1.03364 23.7962 0.667454 23.4504 0.406117C23.1045 0.14478 22.6835 0.00231617 22.25 0H3.75C3.31655 0.00231617 2.89547 0.14478 2.54965 0.406117C2.20382 0.667454 1.95182 1.03364 1.83125 1.45L0.0387507 7.725C0.012928 7.81438 -0.000117927 7.90696 8.03149e-07 8V10C8.03149e-07 10.7762 0.180726 11.5418 0.527865 12.2361C0.875003 12.9303 1.37902 13.5343 2 14V23C2 23.2652 2.10536 23.5196 2.29289 23.7071C2.48043 23.8946 2.73478 24 3 24H23C23.2652 24 23.5196 23.8946 23.7071 23.7071C23.8946 23.5196 24 23.2652 24 23V14C24.621 13.5343 25.125 12.9303 25.4721 12.2361C25.8193 11.5418 26 10.7762 26 10V8ZM3.75 2H22.25L23.6775 7H2.32625L3.75 2ZM10 9H16V10C16 10.7956 15.6839 11.5587 15.1213 12.1213C14.5587 12.6839 13.7957 13 13 13C12.2044 13 11.4413 12.6839 10.8787 12.1213C10.3161 11.5587 10 10.7956 10 10V9ZM8 9V10C7.99982 10.5159 7.86661 11.023 7.61324 11.4724C7.35987 11.9217 6.9949 12.2982 6.55358 12.5653C6.11226 12.8325 5.6095 12.9813 5.09388 12.9975C4.57825 13.0136 4.06717 12.8965 3.61 12.6575C3.54044 12.6034 3.46392 12.5588 3.3825 12.525C2.95884 12.2538 2.61019 11.8804 2.36861 11.4392C2.12702 10.9979 2.00027 10.503 2 10V9H8ZM22 22H4V14.9C4.3292 14.9664 4.66418 14.9999 5 15C5.77623 15 6.54179 14.8193 7.23607 14.4721C7.93035 14.125 8.53427 13.621 9 13C9.46574 13.621 10.0697 14.125 10.7639 14.4721C11.4582 14.8193 12.2238 15 13 15C13.7762 15 14.5418 14.8193 15.2361 14.4721C15.9303 14.125 16.5343 13.621 17 13C17.4657 13.621 18.0697 14.125 18.7639 14.4721C19.4582 14.8193 20.2238 15 21 15C21.3358 14.9999 21.6708 14.9664 22 14.9V22ZM22.6162 12.525C22.5359 12.5589 22.4603 12.603 22.3913 12.6562C21.9341 12.8955 21.423 13.0129 20.9073 12.9969C20.3916 12.981 19.8887 12.8323 19.4473 12.5653C19.0058 12.2982 18.6407 11.9218 18.3872 11.4725C18.1336 11.0231 18.0003 10.516 18 10V9H24V10C23.9996 10.5032 23.8727 10.9981 23.6308 11.4394C23.389 11.8806 23.0401 12.2539 22.6162 12.525Z" fill="#13569C"/>
</svg>`,

  Lainnya: `<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 26 26" fill="none">
    <circle cx="13" cy="13" r="10" stroke="#13569C" stroke-width="2" fill="none"/>
    <path d="M13 8V13M13 18H13.01" stroke="#13569C" stroke-width="2" stroke-linecap="round"/>
  </svg>`,
};

// Function untuk membuat custom icon dari kategori
export const createCategoryIcon = (category: string): L.DivIcon => {
  const iconSvg = categoryIcons[category] || categoryIcons["Lainnya"];

  const pinWithIcon = `
    <div style="position: relative; width: 36px; height: 48px;">
      <!-- Pin background -->
      <svg width="36" height="48" viewBox="0 0 36 48" style="position: absolute; top: 0; left: 0;">
        <!-- Shadow -->
        <ellipse cx="18" cy="44" rx="12" ry="4" fill="rgba(0,0,0,0.2)"/>
        <!-- Main pin dengan background putih -->
        <path d="M18 2C12.477 2 8 6.477 8 12C8 16.5 10.5 20.5 18 36C25.5 20.5 28 16.5 28 12C28 6.477 23.523 2 18 2Z" 
              fill="white" 
              stroke="#13569C" 
              stroke-width="2" 
              stroke-linejoin="round"/>
      </svg>
      <!-- Icon centered in pin -->
      <div style="position: absolute; top: 6px; left: 10px; width: 16px; height: 16px; display: flex; align-items: center; justify-content: center;">
        ${iconSvg}
      </div>
    </div>
  `;

  return L.divIcon({
    html: pinWithIcon,
    className: "custom-marker-icon",
    iconSize: [36, 48],
    iconAnchor: [18, 46],
    popupAnchor: [0, -44],
  });
};
